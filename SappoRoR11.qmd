---
title: "Quartoã§ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’ã¤ãã£ã¦ã¿ãŸ"
subtitle: "SappoRo.R #11"
author: "ä¼Šæ±å®æ¨¹"
date: 2024-02-17
format:
  revealjs:
    theme: [default, custom.scss]
editor: visual
self-contained: true
---

## è‡ªå·±ç´¹ä»‹

-   æ°å: ä¼Šæ±å®æ¨¹
-   å‹¤å‹™å…ˆ: æ£®æ—ç·åˆç ”ç©¶æ‰€åŒ—æµ·é“æ”¯æ‰€
-   å…±è¨³æ›¸:
    -   [[BUGSã§å­¦ã¶éšå±¤ãƒ¢ãƒ‡ãƒªãƒ³ã‚°å…¥é–€---å€‹ä½“ç¾¤ã®ãƒ™ã‚¤ã‚ºè§£æ---](https://www.hanmoto.com/bd/isbn/9784320057807)]{style="font-size: 95%"}
    -   [[ç”Ÿæ…‹å­¦ã®ãŸã‚ã®éšå±¤ãƒ¢ãƒ‡ãƒªãƒ³ã‚°---Rã¨BUGSã«ã‚ˆã‚‹åˆ†å¸ƒãƒ»å€‹ä½“æ•°é‡ãƒ»ç¨®ã®è±Šã‹ã•ã®çµ±è¨ˆè§£æ---](https://www.hanmoto.com/bd/isbn/9784320058149)]{style="font-size: 95%"}

## Quartoã¨ã¯

::: {style="margin-top: 2em; padding-right: 1em;"}
[å…¬å¼ã‚µã‚¤ãƒˆ](https://quarto.org/)ã„ã‚ã:

-   An open-source scientific and technical publishing system

-   Quarto is a multi-language, next generation version of R Markdown from Posit

    -   Rã®ã»ã‹ã€Pythonã€Juliaã€Observableã«å¯¾å¿œ
:::

------------------------------------------------------------------------

-   RStudioä»¥å¤–ã§ã‚‚ä½¿ãˆã‚‹ï¼ˆä¾‹: Emacsï¼‰

![](figures/emacs_quarto-mode.png){fig-alt="Emacs: quarto-mode"}

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

::: {style="margin-top: 2em;"}
-   Rã‚„Rstudioã¨ã¯åˆ¥ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

-   ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã¯ã€quarto.orgã®[Get Started](https://quarto.org/docs/get-started/)ã¾ãŸã¯[ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸](https://quarto.org/docs/download/)ã«ã¦å…¥æ‰‹å¯èƒ½ã€‚
:::

## RStudioã‹ã‚‰ä½¿ã†

![](figures/RStudio-File_Quarto.png){fig-alt="RStudio: File -> New File -> Quarto Document..."}

## ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®ä½œæˆ

ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ File \> New Project...

![](figures/Create_Project.png)

------------------------------------------------------------------------

![](figures/Project_Type.png)

------------------------------------------------------------------------

![](figures/Create_Quarto_Website.png)

## è¨­å®š

::: {style="margin-top: 2em;"}
-   ã‚µã‚¤ãƒˆã®è¨­å®š

-   ãƒšãƒ¼ã‚¸ã”ã¨ã®è¨­å®š
:::

ãã‚Œãã‚Œã«è¨­å®šé …ç›®ãŒã‚ã‚‹ã€‚

## ã‚µã‚¤ãƒˆã®è¨­å®š

\_quarto.yaml

``` yaml
project:
  type: website

website:
  title: "ãƒ†ã‚¹ãƒˆã‚µã‚¤ãƒˆ"
  navbar: left:
    - href: index.qmd
      text: Home
    - about.qmd

format:
  html:
    theme: cosmo
    css: styles.css
    toc: true

editor: visual
```

------------------------------------------------------------------------

è©³ç´°ã¯Quartoå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§

-   [Website Navigation](https://quarto.org/docs/websites/website-navigation.html)

-   [Website Tools](https://quarto.org/docs/websites/website-tools.html)

## ãƒšãƒ¼ã‚¸ã”ã¨ã®è¨­å®š

-   YAMLãƒ˜ãƒƒãƒ€ã§è¨­å®š

-   ä¾‹: `lang: ja`ã¨ã™ã‚‹ã¨ã€ãƒ‘ãƒ¼ãƒ„ã‚’æ—¥æœ¬èªåŒ–ã§ãã‚‹[^1]ã€‚

[^1]: ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚ã«è­¦å‘ŠãŒã§ãŸã‚Šã™ã‚‹ãŒã€‚

``` yaml
---
title: "ãƒ†ã‚¹ãƒˆã‚µã‚¤ãƒˆ"
lang: ja
---
```

## ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®ä½œæˆ

`index.qmd`ã®ä¾‹

``` {style="border: 1px solid gray; padding: 5px;"}
---
title: "ãƒ›ãƒ¼ãƒ "
lang: ja
---

ã“ã‚Œã¯ Quarto ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã§ã™ã€‚

Quarto ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«ã¤ã„ã¦ã¯ <https://quarto.org/docs/websites> ã‚’ã”è¦§ãã ã•ã„ã€‚

![ã‚·ãƒã‚¨ãƒŠã‚¬](images/P3054939.jpeg)
```

## Render

HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆ

![](figures/Render.png)

## ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°çµæœ

![](figures/toppage.png)

## Rã‚³ãƒ¼ãƒ‰

R MarkdownåŒæ§˜ã«Rã‚³ãƒ¼ãƒ‰ã‚’æŒ¿å…¥ãƒ»å®Ÿè¡Œã§ãã‚‹ã€‚

Quartoç‹¬è‡ªã®æ©Ÿèƒ½ã¨ã—ã¦ã€'`#|`' ã®å¾Œã«ãƒãƒ£ãƒ³ã‚¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ›¸ã‘ã‚‹ã€‚

```{{r}}
#| label: plot
#| fig-width: 6
#| fig-height: 3
library(ggplot2)
ggplot(data = iris) +
  geom_point(mapping = aes(x = Sepal.Length, y = Sepal.Width,
                           colour = Species))
```

<!-- ![](figures/ggplot2.png) -->

------------------------------------------------------------------------

```{r}
#| label: plot_real
#| echo: true
#| fig-width: 6
#| fig-height: 3
library(ggplot2)
ggplot(data = iris) +
  geom_point(mapping = aes(x = Sepal.Length, y = Sepal.Width,
                           colour = Species))
```

## æ•°å¼

R Markdownã¨åŒã˜ã€‚

\$ã§å›²ã‚€ã¨ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³æ•°å¼: `$x^2$` â†’ $x^2$

\$\$ã§å›²ã‚€ã¨åˆ¥è¡Œç«‹ã¦æ•°å¼:

```
$$
\Pr(x\mid\mu,\sigma) =
\frac{1}{\sqrt{2\pi}\sigma}\exp\left(-\frac{(x-\mu)^2}{2\sigma^2}\right)
$$
```

$$
\Pr(x \mid \mu, \sigma) = \frac{1}{\sqrt{2\pi}\sigma}\exp\left(-\frac{(x - \mu)^2}{2\sigma^2}\right)
$$

```{=html}
<!--
macOSã®Google Chromeã§æ•°å¼ã®è¡¨ç¤ºãŒä¹±ã‚Œã‚‹å ´åˆã¯ã€æ•°å¼ã§å³ã‚¯ãƒªãƒƒã‚¯-> Math Settings -> Math Rendererã§ã€Common HTMLã‚’é¸æŠã™ã‚‹ã€‚

Qiita: macOS Ventura (v13.1) ã® Chrome (108/109) ã§ Qiita ã®æ•°å¼ãŒå´©ã‚Œã¦è¦‹ãˆã‚‹ä»¶
https://qiita.com/yoya/items/c54f401a9cb78930f9c8
-->
```
## Blogã‚’ï¼ˆå¾Œä»˜ã‘ã§ï¼‰è¿½åŠ 

å‚è€ƒ: [Adding a blog to your existing Quarto website](https://samanthacsik.github.io/posts/2022-10-24-quarto-blogs/)

-   Blogè¨˜äº‹ã‚’æ ¼ç´ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª`posts/`ã‚’è¿½åŠ ã™ã‚‹ã€‚

-   è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«`posts/_metadata.yml`ã‚’è¿½åŠ ã™ã‚‹ï¼ˆä»»æ„ï¼‰ã€‚ã“ã“ã§ã¯`freeze: true`ã‚’è¨­å®šã€‚

``` yaml
# options apply to all posts in this folder

# freeze computational output
freeze: true
```

------------------------------------------------------------------------

Listingãƒšãƒ¼ã‚¸`posts.qmd`ã‚’è¿½åŠ ã™ã‚‹ã€‚å†…å®¹ã¯ä»¥ä¸‹ã®YAMLãƒ˜ãƒƒãƒ€ã€‚

``` yaml
---
title: "Blog"
lang: ja
listing:
  contents: posts    # è¨˜äº‹æ ¼ç´ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
  sort: "date desc"  # é †ç•ª
  type: default      # ãƒªã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«
  categories: true   # ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®ä½¿ç”¨
---
```

`_quarto.yml` ã®`website`ã®é …ç›®ã«`posts.qmd`ã‚’è¿½åŠ 

``` yaml
website:
  title: "ãƒ†ã‚¹ãƒˆã‚µã‚¤ãƒˆ"
  navbar: left:
    - href: index.qmd
      text: Home
    - about.qmd
    - posts.qmd    # <- è¿½åŠ 
```

## Blogè¨˜äº‹ã®è¿½åŠ 

`posts`ã®ä¸‹ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆã€ãã®ä¸‹ã«`index.qmd`ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«åã§Quartoãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆã€‚

````
---
title: "ãƒ†ã‚¹ãƒˆ"
lang: ja
date: "2024-02-17"
categories: [Test, R]
---

ãƒ†ã‚¹ãƒˆã§ã™ã€‚

```{{r}}
#| label: plot
library(ggplot2)
ggplot(data = iris) +
  geom_point(aes(x = Sepal.Length, y = Sepal.Width,
                 colour = Species))
```
````

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ï¼ˆä¾‹ï¼‰

``` {style="border: 1px solid gray; padding: 5px;"}
_quarto.yml
_site/             <- ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸãƒšãƒ¼ã‚¸ã¯_siteä»¥ä¸‹ã«ç”Ÿæˆ
   ...
about.qmd
images/
   ...
index.qmd
posts/             <- Blogç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
   _metadata.yml
   2024-02-17-test/   <- Blogè¨˜äº‹
      index.qmd
   2024-02-18-test2/  <- Blogè¨˜äº‹
      index.qmd
   ...
posts.qmd
styles.css
```

## Render

è¨˜äº‹ã®HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆ

![](figures/Render2.png)

## Listingãƒšãƒ¼ã‚¸

ç”Ÿæˆã•ã‚ŒãŸListingãƒšãƒ¼ã‚¸

![](figures/blog_listing.png)

## Blogè¨˜äº‹

ç”Ÿæˆã•ã‚ŒãŸBlogè¨˜äº‹

![](figures/blog_page.png)

## RSS Feedã®è¿½åŠ 

`_quarto.yml`ã®`website`ã«`site-url`ã¨`description`ã‚’è¿½åŠ ã™ã‚‹ã€‚

``` yaml
website:
  title: "ãƒ†ã‚¹ãƒˆã‚µã‚¤ãƒˆ"
  site-url: https://example.com  # â†è¿½åŠ 
  description: "test blog"       # â†è¿½åŠ 
```

Blogãƒªã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ï¼ˆã“ã®ä¾‹ã§ã¯`posts.qmd`ï¼‰ã®`listing`ã«`feed: true`ã‚’è¿½åŠ ã™ã‚‹ã€‚

``` yaml
listing:
  contents: posts
  sort: "date desc"
  type: default
  categories: true
  feed: true       # â†è¿½åŠ 
```

::: {style="padding-top: 0.5em; font-size: 60%;"}
å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®èª¬æ˜: <https://quarto.org/docs/websites/website-blog.html#rss-feed>
:::

## å®Ÿéš›ã«ä½œæˆã—ãŸã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ

[https://ito4303.sakura.ne.jp](https://ito4303.sakura.ne.jp){.uri target="_blank"} (ã¨ã‚Šã‚ãˆãšå½¢ã ã‘)

![](figures/website.png)

## ãŠã‚ã‚Šã«

è©³ç´°ãªè¨­å®šãªã©ã¯ã€Quartoã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ([Creating a Website](https://quarto.org/docs/websites/))ãªã©ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

::: {style="text-align: center; margin-top: 1em; font-size: 128px;"}
ğŸ¥³
:::
